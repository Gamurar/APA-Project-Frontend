{"ast":null,"code":"import _slicedToArray from\"/home/gamurar/mastertoken/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/gamurar/mastertoken/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import'./Profile.css';import React,{useState}from'react';import{useDispatch,useSelector}from'react-redux';import ChangePassword from'../../components/Controllers/ChangePassword/ChangePassword';import AuthService from'../../services/auth.service';import{logout}from'../../app/authSlice';import styled from'styled-components';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var DeleteMyAccountButton=styled.button(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  cursor: pointer;\\n  display: inline-block;\\n  font-weight: 400;\\n  text-align: center;\\n  vertical-align: middle;\\n  -webkit-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n  border: 1px solid transparent;\\n  padding: 0.375rem 0.75rem;\\n  font-size: 1rem;\\n  line-height: 1.5;\\n  border-radius: 0.25rem;\\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out,\\n    box-shadow 0.15s ease-in-out;\\n  color: #fff;\\n  background-color: #dc3545;\\n  border-color: #dc3545;\\n  margin-top: 50px;\\n\\n  &:hover {\\n    color: #fff;\\n    background-color: #c82333;\\n    border-color: #bd2130;\\n  }\\n\"])));var Profile=function Profile(){var _useState=useState('Delete my account'),_useState2=_slicedToArray(_useState,2),deleteAccountButtonText=_useState2[0],setDeleteAccountButtonText=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),deleteAccountConfirmed=_useState4[0],setDeleteAccountConfirmed=_useState4[1];var _useSelector=useSelector(function(state){return state.auth;}),user=_useSelector.user;var dispatch=useDispatch();var deleteMyAccount=function deleteMyAccount(){if(deleteAccountConfirmed){AuthService.delete().then(function(){dispatch(logout());AuthService.logout();});}else{setDeleteAccountButtonText('Are you sure you want to delete your account');setDeleteAccountConfirmed(true);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[\"Profile\",user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"id: \",user.id]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"email: \",user.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"role: \",user.role]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-actions\",children:[/*#__PURE__*/_jsx(ChangePassword,{}),/*#__PURE__*/_jsx(DeleteMyAccountButton,{onClick:deleteMyAccount,children:deleteAccountButtonText})]})]}):false]});};export default Profile;","map":{"version":3,"sources":["/home/gamurar/mastertoken/frontend/src/pages/Profile/Profile.tsx"],"names":["React","useState","useDispatch","useSelector","ChangePassword","AuthService","logout","styled","DeleteMyAccountButton","button","Profile","deleteAccountButtonText","setDeleteAccountButtonText","deleteAccountConfirmed","setDeleteAccountConfirmed","state","auth","user","dispatch","deleteMyAccount","delete","then","id","email","role"],"mappings":"sVAAA,MAAO,eAAP,CACA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CAEA,MAAOC,CAAAA,cAAP,KAA2B,4DAA3B,CACA,MAAOC,CAAAA,WAAP,KAAwB,6BAAxB,CACA,OAASC,MAAT,KAAuB,qBAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,C,6IAGA,GAAMC,CAAAA,qBAAqB,CAAGD,MAAM,CAACE,MAAV,wtBAA3B,CA4BA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpB,cAA8DT,QAAQ,CAAC,mBAAD,CAAtE,wCAAOU,uBAAP,eAAgCC,0BAAhC,eACA,eAA4DX,QAAQ,CAAC,KAAD,CAApE,yCAAOY,sBAAP,eAA+BC,yBAA/B,eACA,iBAAiBX,WAAW,CAAC,SAACY,KAAD,QAAsBA,CAAAA,KAAK,CAACC,IAA5B,EAAD,CAA5B,CAAQC,IAAR,cAAQA,IAAR,CACA,GAAMC,CAAAA,QAAQ,CAAGhB,WAAW,EAA5B,CAEA,GAAMiB,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5B,GAAIN,sBAAJ,CAA4B,CAC1BR,WAAW,CAACe,MAAZ,GAAqBC,IAArB,CAA0B,UAAM,CAC9BH,QAAQ,CAACZ,MAAM,EAAP,CAAR,CACAD,WAAW,CAACC,MAAZ,GACD,CAHD,EAID,CALD,IAKO,CACLM,0BAA0B,CAAC,8CAAD,CAA1B,CACAE,yBAAyB,CAAC,IAAD,CAAzB,CACD,CACF,CAVD,CAYA,mBACE,aAAK,SAAS,CAAC,SAAf,qBAEGG,IAAI,cACH,wCACE,4BAAQA,IAAI,CAACK,EAAb,GADF,cAEE,+BAAWL,IAAI,CAACM,KAAhB,GAFF,cAGE,8BAAUN,IAAI,CAACO,IAAf,GAHF,cAIE,aAAK,SAAS,CAAC,iBAAf,wBACE,KAAC,cAAD,IADF,cAEE,KAAC,qBAAD,EAAuB,OAAO,CAAEL,eAAhC,UAAkDR,uBAAlD,EAFF,GAJF,GADG,CAWH,KAbJ,GADF,CAkBD,CApCD,CAsCA,cAAeD,CAAAA,OAAf","sourcesContent":["import './Profile.css';\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { RootState } from '../../app/store';\nimport ChangePassword from '../../components/Controllers/ChangePassword/ChangePassword';\nimport AuthService from '../../services/auth.service';\nimport { logout } from '../../app/authSlice';\nimport styled from 'styled-components';\nimport { history } from '../../helpers/history';\n\nconst DeleteMyAccountButton = styled.button`\n  cursor: pointer;\n  display: inline-block;\n  font-weight: 400;\n  text-align: center;\n  vertical-align: middle;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  border: 1px solid transparent;\n  padding: 0.375rem 0.75rem;\n  font-size: 1rem;\n  line-height: 1.5;\n  border-radius: 0.25rem;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out,\n    box-shadow 0.15s ease-in-out;\n  color: #fff;\n  background-color: #dc3545;\n  border-color: #dc3545;\n  margin-top: 50px;\n\n  &:hover {\n    color: #fff;\n    background-color: #c82333;\n    border-color: #bd2130;\n  }\n`;\n\nconst Profile = () => {\n  const [deleteAccountButtonText, setDeleteAccountButtonText] = useState('Delete my account');\n  const [deleteAccountConfirmed, setDeleteAccountConfirmed] = useState(false);\n  const { user } = useSelector((state: RootState) => state.auth);\n  const dispatch = useDispatch();\n\n  const deleteMyAccount = () => {\n    if (deleteAccountConfirmed) {\n      AuthService.delete().then(() => {\n        dispatch(logout());\n        AuthService.logout();\n      });\n    } else {\n      setDeleteAccountButtonText('Are you sure you want to delete your account');\n      setDeleteAccountConfirmed(true);\n    }\n  };\n\n  return (\n    <div className=\"profile\">\n      Profile\n      {user ? (\n        <>\n          <p>id: {user.id}</p>\n          <p>email: {user.email}</p>\n          <p>role: {user.role}</p>\n          <div className=\"profile-actions\">\n            <ChangePassword />\n            <DeleteMyAccountButton onClick={deleteMyAccount}>{deleteAccountButtonText}</DeleteMyAccountButton>\n          </div>\n        </>\n      ) : (\n        false\n      )}\n    </div>\n  );\n};\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}