{"ast":null,"code":"import _slicedToArray from\"/home/gamurar/mastertoken/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/gamurar/mastertoken/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import'./Register.css';import React,{useState}from'react';import{useDispatch,useSelector}from'react-redux';import{Link,Redirect}from'react-router-dom';import AuthService from'../../services/auth.service';import{registerSuccess,registerFail}from'../../app/authSlice';import BaseButton from'../../components/Views/Button/Button';import styled from'styled-components';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Button=styled(BaseButton)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  font-size: 14px;\\n  margin-left: auto; \\n  &:hover,\\n  &:focus {\\n    border: 2px solid rgba(112, 76, 182, 0.4);\\n  }\\n\\n  &:active {\\n    background-color: rgba(112, 76, 182, 0.2);\\n  }\\n\"])));var Register=function Register(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),userEmail=_useState2[0],setUserEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useSelector=useSelector(function(state){return state.auth;}),isLoggedIn=_useSelector.isLoggedIn,message=_useSelector.message;var dispatch=useDispatch();var onChangeEmail=function onChangeEmail(e){var email=e.target.value;setUserEmail(email);};var onChangePassword=function onChangePassword(e){var password=e.target.value;setPassword(password);};var handleRegistration=function handleRegistration(e){e.preventDefault();setLoading(true);AuthService.register({email:userEmail,password:password}).then(function(data){console.log({data:data});if(data){dispatch(registerSuccess());}else{dispatch(registerFail());}}).catch(function(){setLoading(false);});};if(isLoggedIn){return/*#__PURE__*/_jsx(Redirect,{to:\"/dashboard\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"register\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"register__header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header__title\",children:\"Create an account\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header__create\",children:[\"or\",' ',/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"header__link\",children:\"log in\"})]})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleRegistration,className:\"register__form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form__field\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"field__input\",name:\"email\",value:userEmail,placeholder:\"Email\",onChange:onChangeEmail})}),/*#__PURE__*/_jsx(\"div\",{className:\"form__field\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"field__input\",name:\"password\",value:password,placeholder:\"Password\",onChange:onChangePassword})}),/*#__PURE__*/_jsx(\"div\",{className:\"form__actions\",children:/*#__PURE__*/_jsx(Button,{disabled:loading,children:loading?/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm\",children:\"Loading...\"}):/*#__PURE__*/_jsx(\"span\",{children:\"Create an account\"})})}),message&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red'},children:message})]})]});};export default Register;","map":{"version":3,"sources":["/home/gamurar/mastertoken/frontend/src/pages/Register/Register.tsx"],"names":["React","useState","useDispatch","useSelector","Link","Redirect","AuthService","registerSuccess","registerFail","BaseButton","styled","Button","Register","props","userEmail","setUserEmail","password","setPassword","loading","setLoading","state","auth","isLoggedIn","message","dispatch","onChangeEmail","e","email","target","value","onChangePassword","handleRegistration","preventDefault","register","then","data","console","log","catch","color"],"mappings":"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","sourcesContent":["import './Register.css';\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, Redirect } from 'react-router-dom';\nimport { RootState } from '../../app/store';\nimport AuthService from '../../services/auth.service';\nimport { registerSuccess, registerFail } from '../../app/authSlice';\nimport BaseButton from '../../components/Views/Button/Button';\nimport styled from 'styled-components';\n\nconst Button = styled(BaseButton)`\n  font-size: 14px;\n  margin-left: auto; \n  &:hover,\n  &:focus {\n    border: 2px solid rgba(112, 76, 182, 0.4);\n  }\n\n  &:active {\n    background-color: rgba(112, 76, 182, 0.2);\n  }\n`;\n\nconst Register = (props: any) => {\n  const [userEmail, setUserEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const { isLoggedIn, message } = useSelector((state: RootState) => state.auth);\n\n  const dispatch = useDispatch();\n\n  const onChangeEmail = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const email = e.target.value;\n    setUserEmail(email);\n  };\n\n  const onChangePassword = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const password = e.target.value;\n    setPassword(password);\n  };\n\n  const handleRegistration = (e: React.SyntheticEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    AuthService.register({ email: userEmail, password })\n      .then((data) => {\n        console.log({ data });\n        if (data) {\n          dispatch(registerSuccess());\n        } else {\n          dispatch(registerFail());\n        }\n      })\n      .catch(() => {\n        setLoading(false);\n      });\n  };\n\n  if (isLoggedIn) {\n    return <Redirect to=\"/dashboard\" />;\n  }\n\n  return (\n    <div className=\"register\">\n      <div className=\"register__header\">\n        <div className=\"header__title\">Create an account</div>\n        <div className=\"header__create\">\n          or{' '}\n          <Link to=\"/login\" className=\"header__link\">\n            log in\n          </Link>\n        </div>\n      </div>\n      <form onSubmit={handleRegistration} className=\"register__form\">\n        <div className=\"form__field\">\n          <input\n            type=\"text\"\n            className=\"field__input\"\n            name=\"email\"\n            value={userEmail}\n            placeholder=\"Email\"\n            onChange={onChangeEmail}\n          />\n        </div>\n\n        <div className=\"form__field\">\n          <input\n            type=\"password\"\n            className=\"field__input\"\n            name=\"password\"\n            value={password}\n            placeholder=\"Password\"\n            onChange={onChangePassword}\n          />\n        </div>\n\n        <div className=\"form__actions\">\n          <Button disabled={loading}>\n            {loading ? <span className=\"spinner-border spinner-border-sm\">Loading...</span> : <span>Create an account</span>}\n          </Button>\n        </div>\n\n        {message && <div style={{ color: 'red' }}>{message}</div>}\n      </form>\n    </div>\n  );\n};\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}