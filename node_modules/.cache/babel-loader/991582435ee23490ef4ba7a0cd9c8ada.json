{"ast":null,"code":"var _jsxFileName = \"/home/gamurar/mastertoken/react-boilerplate/src/pages/Login/Login.tsx\",\n    _s = $RefreshSig$();\n\nimport './Login.css';\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport AuthService from '../../services/auth.service';\nimport { loginSuccess, loginFail, setUser } from '../../app/authSlice';\nimport { history } from '../../helpers/history';\nimport BaseButton from '../../components/Views/Button/Button';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Button = styled(BaseButton)`\n  font-size: 14px;\n  &:hover,\n  &:focus {\n    border: 2px solid rgba(112, 76, 182, 0.4);\n  }\n\n  &:active {\n    background-color: rgba(112, 76, 182, 0.2);\n  }\n`;\n_c = Button;\n\nconst Login = props => {\n  _s();\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const {\n    message\n  } = useSelector(state => state.auth);\n  const dispatch = useDispatch();\n\n  const onChangeEmail = e => {\n    const email = e.target.value;\n    setEmail(email);\n  };\n\n  const onChangePassword = e => {\n    const password = e.target.value;\n    setPassword(password);\n  };\n\n  const handleLogin = e => {\n    e.preventDefault();\n    setLoading(true);\n    AuthService.login(email, password).then(data => {\n      dispatch(loginSuccess(data.accessToken));\n      return AuthService.me();\n    }).then(user => {\n      dispatch(setUser(user));\n      history.push('/profile');\n      window.location.reload();\n    }).catch(error => {\n      var _error$response, _error$response$data;\n\n      dispatch(loginFail((error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || (error === null || error === void 0 ? void 0 : error.message) || 'Something went wrong'));\n      setLoading(false);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login__header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header__title\",\n        children: \"Sign in\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header__create\",\n        children: [\"or \", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          className: \"header__link\",\n          children: \"create an account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 46\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleLogin,\n      className: \"login__form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form__field\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"field__input\",\n          name: \"email\",\n          value: email,\n          placeholder: \"Email\",\n          onChange: onChangeEmail\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form__field\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          className: \"field__input\",\n          name: \"password\",\n          value: password,\n          placeholder: \"Password\",\n          onChange: onChangePassword\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form__actions\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/forgot-password\",\n          className: \"actions__forgot-password\",\n          children: \"Forgot your password?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          disabled: loading,\n          children: loading ? /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"spinner-border spinner-border-sm\",\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 26\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Sign in\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 97\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: 'red'\n        },\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 23\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"S5Pkn3LeZ2BMQIy0jbe22L64/3E=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c2 = Login;\nexport default Login;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Button\");\n$RefreshReg$(_c2, \"Login\");","map":{"version":3,"sources":["/home/gamurar/mastertoken/react-boilerplate/src/pages/Login/Login.tsx"],"names":["React","useState","useDispatch","useSelector","Link","AuthService","loginSuccess","loginFail","setUser","history","BaseButton","styled","Button","Login","props","email","setEmail","password","setPassword","loading","setLoading","message","state","auth","dispatch","onChangeEmail","e","target","value","onChangePassword","handleLogin","preventDefault","login","then","data","accessToken","me","user","push","window","location","reload","catch","error","response","color"],"mappings":"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","sourcesContent":["import './Login.css';\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { RootState } from '../../app/store';\nimport AuthService from '../../services/auth.service';\nimport { loginSuccess, loginFail, setUser } from '../../app/authSlice';\nimport { history } from '../../helpers/history';\nimport BaseButton from '../../components/Views/Button/Button';\nimport styled from 'styled-components';\n\nconst Button = styled(BaseButton)`\n  font-size: 14px;\n  &:hover,\n  &:focus {\n    border: 2px solid rgba(112, 76, 182, 0.4);\n  }\n\n  &:active {\n    background-color: rgba(112, 76, 182, 0.2);\n  }\n`;\n\nconst Login = (props: any) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const { message } = useSelector((state: RootState) => state.auth);\n\n  const dispatch = useDispatch();\n\n  const onChangeEmail = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const email = e.target.value;\n    setEmail(email);\n  };\n\n  const onChangePassword = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const password = e.target.value;\n    setPassword(password);\n  };\n\n  const handleLogin = (e: React.SyntheticEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    AuthService.login(email, password)\n      .then((data) => {\n        dispatch(loginSuccess(data.accessToken));\n        return AuthService.me();\n      })\n      .then((user) => {\n        dispatch(setUser(user));\n        history.push('/profile');\n        window.location.reload();\n      })\n      .catch((error) => {\n        dispatch(loginFail(error?.response?.data?.message || error?.message || 'Something went wrong'));\n        setLoading(false);\n      });\n  };\n\n  return (\n    <div className='login'>\n        <div className='login__header'>\n          <div className=\"header__title\">Sign in</div>\n          <div className=\"header__create\">or <Link to=\"/register\" className='header__link'>create an account</Link></div>\n        </div>\n        <form onSubmit={handleLogin} className=\"login__form\">\n          <div className=\"form__field\">\n            <input\n              type=\"text\"\n              className=\"field__input\"\n              name=\"email\"\n              value={email}\n              placeholder=\"Email\"\n              onChange={onChangeEmail}\n            />\n          </div>\n\n          <div className=\"form__field\">\n            <input\n              type=\"password\"\n              className=\"field__input\"\n              name=\"password\"\n              value={password}\n              placeholder=\"Password\"\n              onChange={onChangePassword}\n            />\n          </div>\n\n          <div className='form__actions'>\n            <Link to='/forgot-password' className='actions__forgot-password'>Forgot your password?</Link>\n            <Button disabled={loading}>\n              {loading ? <span className=\"spinner-border spinner-border-sm\">Loading...</span> : <span>Sign in</span>}\n            </Button>\n          </div>\n\n          {message && <div style={{ color: 'red' }}>{message}</div>}\n        </form>\n      </div>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}